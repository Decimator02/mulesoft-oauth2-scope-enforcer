<?xml version="1.0" encoding="UTF-8"?>
<!-- 
#
# Copyright (c) 2017 The Trustees of Columbia University in the City of New York
# 
-->
<policy xmlns="http://www.mulesoft.org/schema/mule/policy"
   id="{{policyId}}"
   order="6000"
   policyName="OAuth 2.0 Scope Enforcement Policy"
   online="true"
   requiresContracts="true"
   xmlns:mule="http://www.mulesoft.org/schema/mule/core"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
   xmlns:api-platform-gw="http://www.mulesoft.org/schema/mule/api-platform-gw"
   xsi:schemaLocation="http://www.mulesoft.org/schema/mule/policy http://www.mulesoft.org/schema/mule/policy/current/mule-policy.xsd
		       http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		       http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd
		       http://www.mulesoft.org/schema/mule/api-platform-gw http://www.mulesoft.org/schema/mule/api-platform-gw/current/mule-api-platform-gw.xsd">

    <pointcut>
      <api-platform-gw:api-pointcut apiName="{{ apiName }}" apiVersion="{{ apiVersionName }}"/>
    </pointcut>

    <before>
      {{#scopeMap}}
      <mule:set-property propertyName="{{ key }}" value="{{ value }}"/>
      {{/scopeMap}}
    </before>
    
    <after>
    </after>

</policy>
